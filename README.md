# Articles - веб-приложение для хранения статей

Проект представляет из себя:
1. веб-сайт, на котором можно размещать свои статьи, просматривать чужие статьи и комментировать их;
2. набор сервисов REST API для работы со статьями;

## Запуск
Для запуска достаточно загрузить файл docker-compose.yaml и запустить команды в директории с ним:
- `docker compose build` - собрать связку-контейнеров из файла docker-compose.yaml
- `docker compose up` - запустить связку контейнеров

После выполнения команд будут запущены 2 контейнера, описанные в файле .yaml.
К БД из контейнера можно подключиться извне по порту 5444.
Важно, порты 5444 и 8085 (порт используемый БД и приложением) не должны использоваться, иначе `docker compose` упадёт.
Можно скорректировать .yaml файл и другие порты выбрать, если эти заняты.

п.с. 
`docker compose` должен быть установлен по умолчанию с `docker-desktop`

Тестовые данные в БД можно загрузить скриптом `insert-test-data.sql`. (7 юзеров с паролями **data**, 100 статей и 200 комментов)

## Документация API
В проект подключён Swagger (библиотека SpringDoc), благодаря чему автоматически генерируется документация OpenAPI на REST-сервисы.
Документация доступна по адресам:
1. http://localhost:8085/swagger-ui/index.html
2. http://localhost:8085/v3/api-docs 
 
(если не использованы другие порты)   

<img src="docs/swagger.gif"/>

## Обзор функционала веб-приложения

### Просмотр постраничного списка статей
По адресу `/articles/id`, где id это номер страницы, можно посмотреть страницу-список из 10 статей.
Адрес `/articles` ведёт на 1ую страницу. 
На каждой из страниц есть навигационные ссылки для перемещения на другие страницы.
Вверху расположен хедер, под хедером находится поисковик, для получения такого списка статей, который удовлетворяет параметрам поиска.

Сами статьи кликабельны:
- по клику на заголовок можно перейти на саму статью;
- по клику на автора (его фамилию) можно перейти на профиль автора;

<img src="docs/navigation.gif" title="Просмотр статей"/>

### Поиск статей
На странице `/articles/...` присутствует поисковая строка, где можно искать по параметрам:
- по заголовку (искомое слово должно быть в заголовке статьи);
- по автору (искомое слово должно быть в имени-фамилии-отчестве автора статьи);
- по тексту статьи (искомое слово должно быть в тексте статьи);

<img src="docs/search.gif" title="Поиск статей"/>

### Регистрация и вход
Зайдя на сайт, пользователь не будет аутенфицирован. Он сможет только читать статьи. Основным функционалом он пользоваться не сможет.
Необходимо либо зайти на сайт через ссылку "Login", либо зарегистрировать нового пользователя через "Register" и затем войти с его данными.
При успешной регистрации, произойдет переход на профиль созданного пользователя.

Вход на сайт осуществляется через адрес `/login`, также сюда перенаправляются запросы неаутенфецированных пользователей при запросах на адреса, которые им недоступны.
После входа происходит перенаправление на страницу со списком статей.
Пароли хранятся в БД в хэшированном виде.

<img src="docs/createUser.gif"/>


### Создание и просмотр конкретной статьи
При нажатии на ссылку "Write" в хедере зарегестрированный пользователь сможет создать статью.
С помощью поля для ввода ckeditor можно форматировать текст статьи: выделять цитирование, вставлять таблицы и т.д.
После создания статьи, произойдет редеректинг на неё. 
Автор может изменять свои статьи и удалять их. Автор статьи кликабелен и ведёт на профиль пользователя.
Зарегистрированные пользователи могут оставлять к статье комментарии.

Статьи доступны по адресу `/article/id`, где id это уникальный идентификатор статьи.
Сюда же можно попасть переходом из общего списка статей и из профиля автора (раздел "Недавние статьи").

<img src="docs/createArticle.gif"/>

### Профиль пользователя
Помимо основной информации о пользователе, в его профиле содержится информация о последних (по дате) 5 статьях (аналогично списку статей).
Попасть на свой профиль можно через ссылку "My Profile" в хэдере. Перейти на чужой профиль можно через ссылку на автора в статье или комментарии.
Посмотреть любой другой профиль можно по ссылку `/user/id`, где id - идентификатор пользователя.

Хозяину профиля доступна возможность редактирования профиля пользователя.
<img src="docs/profile.gif"/>

### Комментирование статей
Просматривая статьи, любой аутенфицированный пользователь может оставлять к ним комментарии.
В теле комментария есть гиперссылка на его автора, текст комментария и дата его публикации.
Автору комментария и пользователям с правами администратора доступна возможность удалить оставленный комментарий.
<img src="docs/shareComment.gif"/>

### Изменение статей
Автор статьи может изменить её или удалить.
При удалении происходит возвращение на список статей.
<img src="docs/updateArticle.gif"/>

### Администратор
Для создания пользователя с ролью администратора необходимо при регистрации поставить галочку напротив чекбокса "Is admin?"
Пользователю с ролью администратору доступны возможности:
- редактирование любой статьи;
- удаление любой статьи;
- удаление любого комментария;
<img src="docs/admin.gif"/>

## Логирование
События приложения логируются, логи хранятся в папке [logs](/logs)